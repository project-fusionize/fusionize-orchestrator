kind: Workflow
apiVersion: v1
name: Test Email Workflow
domain: test.email-workflow
key: test-email-workflow-key
description: A test workflow for email processing
version: 1
active: true
nodes:
  start1:
    type: START
    component: start:test.receivedIncomingEmail
    componentConfig:
      address: incoming@email.com
    next:
      - decision1

  decision1:
    type: DECISION
    component: decision:test.emailDecision
    componentConfig:
      routeMap:
        "route 1": task1
        "route 2": task2
    next:
      - task1
      - task2

  task1:
    type: TASK
    component: task:test.sendEmail
    componentConfig:
      address: outgoing1@email.com
      retryCount: 3
    next:
      - end1

  task2:
    type: TASK
    component: task:test.sendEmail
    componentConfig:
      address: outgoing2@email.com
      retryCount: 2
    next:
      - end1

  end1:
    type: END
    component: end:test.endEmailWorkflow
    componentConfig: {}
    next: []


